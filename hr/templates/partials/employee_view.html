{% load static %}
<div class="container-fluid position-relative">
    {% if employee.emp_status == 'in-active' %}
    <div class="inactive-cross">
        <i class="fas fa-times-circle"></i>
    </div>
    {% endif %}
    <div class="row g-4">
        <div class="col-lg-4 col-md-5 text-center">
            <div class="card shadow-sm border-0 fade-in">
                <div class="card-body p-4">
                    {% if employee.emp_photo %}
                    <img src="{{ employee.emp_photo.url }}"
                         alt="Employee Photo"
                         class="rounded-circle img-fluid mb-3"
                         style="width: 200px; height: 200px; object-fit: cover; border: 4px solid #e9ecef;">
                    {% else %}
                    <img src="https://via.placeholder.com/200x200?text=No+Photo"
                         alt="No Photo"
                         class="rounded-circle img-fluid mb-3"
                         style="width: 200px; height: 200px; object-fit: cover; border: 4px solid #e9ecef;">
                    {% endif %}
                    <h4 class="card-title mb-2">{{ employee.emp_first_name }} {{ employee.emp_last_name }}</h4>
                    <p class="employee-id mb-2"><strong>ID:</strong> {{ employee.emp_id_branch|default:"N/A" }}</p>
                    <p class="text-muted mb-3">{{ employee.emp_designation.designation_name|default:"N/A" }}</p>
                </div>
            </div>
        </div>
        <div class="col-lg-8 col-md-7">
            <div class="card shadow-sm border-0 fade-in">
                <div class="card-body p-4">
                    <h5 class="mb-3 border-bottom pb-2">
                        <i class="bi bi-person-lines-fill me-2"></i>Personal Information
                    </h5>
                    <div class="row g-3 mb-4">
                        <div class="col-md-6">
                            <strong><i class="bi bi-card-text me-1"></i>Aadhar Number:</strong>
                            {% if employee.emp_aadhar_number %}
                            {{ employee.emp_aadhar_number|slice:"0:4" }}
                            {{ employee.emp_aadhar_number|slice:"4:8" }}
                            {{ employee.emp_aadhar_number|slice:"8:12" }}
                            {% else %}
                            <span class="text-muted">N/A</span>
                            {% endif %}
                        </div>
                        <div class="col-md-6">
                            <strong><i class="bi bi-calendar-date me-1"></i>Date of Birth:</strong>
                            {{ employee.emp_dob|date:"Y-m-d"|default:"N/A" }}
                        </div>
                        <div class="col-md-6">
                            <strong><i class="bi bi-telephone me-1"></i>Mobile:</strong>
                            {{ employee.emp_mobile|default:"N/A" }}
                        </div>
                        <div class="col-md-6">
                            <strong><i class="bi bi-telephone-plus me-1"></i>Secondary Mobile:</strong>
                            {{ employee.emp_second_mobile|default:"N/A" }}
                        </div>
                        <div class="col-md-6">
                            <strong><i class="bi bi-envelope me-1"></i>Email:</strong>
                            {{ employee.emp_email|default:"N/A" }}
                        </div>
                        <div class="col-md-6">
                            <strong><i class="bi bi-droplet me-1"></i>Blood Group:</strong>
                            {{ employee.emp_blood_group|default:"N/A"|upper }}
                        </div>
                        <div class="col-md-6">
                            <strong><i class="bi bi-mortarboard me-1"></i>Qualification:</strong>
                            {{ employee.emp_qualification.qualification_name|default:"N/A" }}
                        </div>
                        <div class="col-md-12">
                            <strong><i class="bi bi-geo-alt me-1"></i>Address:</strong>
                            {{ employee.emp_address|default:"N/A" }}
                        </div>
                    </div>
                    <h5 class="mb-3 border-bottom pb-2">
                        <i class="bi bi-briefcase-fill me-2"></i>Professional Information
                    </h5>
                    <div class="row g-3 mb-4">
                        <div class="col-md-6">
                            <strong><i class="bi bi-building me-1"></i>Company:</strong>
                            {{ employee.emp_company.company_name|default:"N/A" }}
                        </div>
                        <div class="col-md-6">
                            <strong><i class="bi bi-shop me-1"></i>Branch:</strong>
                            {{ employee.emp_branch.name|default:"N/A" }}
                        </div>
                        <div class="col-md-6">
                            <strong><i class="bi bi-diagram-3 me-1"></i>Department:</strong>
                            {{ employee.emp_department.department_name|default:"N/A" }}
                        </div>
                        <div class="col-md-6">
                            <strong><i class="bi bi-diagram-2 me-1"></i>Sub-Department:</strong>
                            {{ employee.emp_sub_department.sub_department_name|default:"N/A" }}
                        </div>
                        <div class="col-md-6">
                            <strong><i class="bi bi-person-badge me-1"></i>Designation:</strong>
                            {{ employee.emp_designation.designation_name|default:"N/A" }}
                        </div>
                        <div class="col-md-6">
                            <strong><i class="bi bi-tags me-1"></i>Category:</strong>
                            {{ employee.emp_category.category_name|default:"N/A" }}
                        </div>
                        <div class="col-md-6">
                            <strong><i class="bi bi-currency-rupee me-1"></i>Salary:</strong>
                            â‚¹{{ employee.emp_salary|floatformat:2 }}
                        </div>
                        <div class="col-md-6">
                            <strong><i class="bi bi-calendar-check me-1"></i>Joining Date:</strong>
                            {{ employee.emp_joining_date|date:"Y-m-d" }}
                        </div>
                        {% if employee.emp_status == 'in-active' %}
                        <div class="col-md-6">
                            <strong><i class="bi bi-calendar-x me-1"></i>Resigning Date:</strong>
                            {{ employee.emp_resigning_date|date:"Y-m-d"|default:"N/A" }}
                        </div>
                        {% endif %}
                        <div class="col-md-6">
                            <strong><i class="bi bi-hourglass-split me-1"></i>Work Duration:</strong>
                            <span class="badge bg-info text-dark">{{ employee.work_duration }} days</span>
                        </div>
                        <div class="col-md-6">
                            <strong><i class="bi bi-clock me-1"></i>Work Hours:</strong>
                            {% if employee.emp_work_start_time and employee.emp_work_end_time %}
                            {{ employee.emp_work_start_time|time:"H:i" }} -
                            {{ employee.emp_work_end_time|time:"H:i" }}
                            {% else %}
                            <span class="text-muted">N/A</span>
                            {% endif %}
                        </div>
                        <div class="col-md-6">
                            <strong><i class="bi bi-star-fill me-1"></i>Rating:</strong>
                            <span class="badge bg-{{ employee.emp_rating|default:'average' }}-custom">
                                {{ employee.emp_rating|title|default:"Average" }}
                            </span>
                        </div>
                        <div class="col-md-6">
                            <strong><i class="bi bi-check-circle me-1"></i>Status:</strong>
                            <span class="badge {% if employee.emp_status == 'active' %}bg-success{% else %}bg-danger{% endif %}">
                                {{ employee.emp_status|title }}
                            </span>
                        </div>
                        <div class="row g-3 mb-4">
                            <div class="col-md-6">
                                <strong><i class="bi bi-tools me-1"></i>Extra Skills:</strong>
                                {% if employee.emp_extra_skills.all %}
                                {% for skill in employee.emp_extra_skills.all %}
                                <span class="badge bg-primary me-1 skill-badge"
                                      data-bs-toggle="tooltip"
                                      data-bs-placement="top"
                                      title="{{ skill.description|default:'No description' }}">
                                    {{ skill.name }}
                                </span>
                                {% endfor %}
                                {% else %}
                                <span class="text-muted">None</span>
                                {% endif %}
                            </div>
                            <div class="col-md-6">
                                <strong><i class="bi bi-tools me-1"></i>Assets:</strong>
                                {% if employee.emp_assets.all %}
                                {% for asset in employee.emp_assets.all %}
                                <span class="badge bg-primary me-1 skill-badge"
                                      data-bs-toggle="tooltip"
                                      data-bs-placement="top"
                                      title="{{ asset.description|default:'No description' }}">
                                    {{ asset.name }}
                                </span>
                                {% endfor %}
                                {% else %}
                                <span class="text-muted">None</span>
                                {% endif %}
                            </div>
                        </div>
                        <h5 class="mb-3 border-bottom pb-2">
                            <i class="bi bi-briefcase me-2"></i>Experience Details
                        </h5>
                        {% if employee.emp_experiences %}
                        <div class="table-responsive">
                            <table class="table table-striped table-bordered">
                                <thead class="table-primary">
                                <tr>
                                    <th>Company Name</th>
                                    <th>Designation</th>
                                    <th>Start Date</th>
                                    <th>End Date</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for exp in employee.emp_experiences %}
                                <tr>
                                    <td>{{ exp.company_name|default:"N/A" }}</td>
                                    <td>{{ exp.designation|default:"N/A" }}</td>
                                    <td>{{ exp.start_date|default:"N/A" }}</td>
                                    <td>{{ exp.end_date|default:"N/A" }}</td>
                                </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                        </div>
                        {% else %}
                        <p class="text-muted">No experience details available.</p>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>

<style>
    .container-fluid {
        position: relative;
        padding: 20px;
    }
    .inactive-cross {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) rotate(45deg);
        z-index: 1000;
        opacity: 0.3;
        pointer-events: none;
    }
    .inactive-cross i {
        font-size: 300px;
        color: #dc3545;
    }
    .card {
        border: none;
        border-radius: 0.5rem;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }
    .card-body {
        padding: 1.5rem;
    }
    .badge.bg-primary {
        background-color: #007bff !important;
    }
    .badge.bg-success {
        background-color: #28a745 !important;
    }
    .badge.bg-danger {
        background-color: #dc3545 !important;
    }
    .badge.bg-info {
        background-color: #17a2b8 !important;
    }
    .badge.bg-poor-custom {
        background-color: #dc3545 !important;
    }
    .badge.bg-bad-custom {
        background-color: #fd7e14 !important;
    }
    .badge.bg-average-custom {
        background-color: #ffc107 !important;
    }
    .badge.bg-good-custom {
        background-color: #28a745 !important;
    }
    .badge.bg-excellent-custom {
        background-color: #007bff !important;
    }
    .skill-badge {
        cursor: pointer;
        font-size: 0.9rem;
        padding: 0.4em 0.8em;
    }
    @media (max-width: 767.98px) {
        .inactive-cross i {
            font-size: 150px;
        }
        .card-body {
            padding: 1rem;
        }
    }
</style>